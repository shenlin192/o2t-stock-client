
<h1 align="center">O2T STOCK | <a href="https://media.giphy.com/media/xUNd9CEkMcTaskmElW/giphy.gif">Demos</a></h1>

<h5 align="center">A REAL TIME STOCK DISPLAY REACT APP</h5>

<p align="center">
<img src="https://camo.githubusercontent.com/45aaaf83e370e9c26b3439cd3bb3cef73f8c6d5d/68747470733a2f2f6d656469612e67697068792e636f6d2f6d656469612f78554e643943456b4d635461736b6d456c572f67697068792e676966" alt="demo" data-canonical-src="https://media.giphy.com/media/xUNd9CEkMcTaskmElW/giphy.gif" style="max-width:100%">
</p>

## Overview
This react application mainly contains 3 functionality:

- Show the last 20 values of CAC40 and NASDAQ in a table and a curve
- Whenever a value in the table is modified by user, the corresponding value in the curve will change accordingly
- Values in the table and the curve will be refreshed every second, except for values modified by a user. 
 
When the table is focused, refresh of table will be **paused** until it lose focus again. 

Stock values will be modified only when the user input is a validated number and user press ENTER or table lose focus.

The application is fully **responsive** and can be used in mobile, iPad and desktop.

## Usage

Clone this repo via git

    git clone https://github.com/shenlin192/o2t-stock-client.git

Install dependencies via npm.

    cd o2t-stock-client
    npm install 
    
Start the application
    
    npm start
    
Test the application

    npm run test
    
Build it for production 

    npm run build
    
Server side data is generated by [this repo](https://github.com/o2t/tutorial-node-stock-server)

In order to solve the CORS problem during development, "Access-Control-Allow-Origin" option needs to be added to the server.
    
## How do I build this app
This section is dedicated to explain the structure of the application, the technologies/libraries that I used and the reason why I chose them.

### Preparation
After reading carefully the goal of this test and fully understand its demands, the first thing I do is to decide which 
 technologies to use. To quick start a dynamic and data-driven react application, `create-react-app` and `redux` 
 are chosen immediately without doubt. As for testing `jest` is used as it comes along with `create-react-app`.
 In order to guaranty code quality, the popular `eslint-airbnb` style is used.
  
#### Choices for the table
It's uncommon to have an excel like table in an application web. So I did some research and found: 

- `react-table` 
- `react-data-grid`

Both of them have 2000+ stars in gitHub. Thus, they all worth trying. 

Finally I have chosen `react-table` because its document is written in ES6 and provides an interactive playground.
While `react-data-grid` uses old coding style and its document is a little bit vague.

#### Choices for the chart
It's common to have a line chart in an application web but the integration with react is something new. 
So I did some research also and found:

- `d3.js`
- `react-vis`
- `BizCharts`
- `...`

Without doubt, `d3.js` is the most popular data-visualisation library for web development. So I start by digging out its integration with react.

Generally, there are 2 ways to achieve this goal:

- Give D3 the right to manipulate corresponding DOM elements like this:
````jsx harmony
    render(){
          return <svg ref={node => this.node = node}
          width={500} height={500}>
          </svg>
       }
````

- Use D3 to do all the math but leave DOM manipulate to React:
````jsx harmony
 return (
  <svg>
    <g className="scatter">
           {circlePoints.map(circlePoint => (
             <circle
               cx={circlePoint.x}
               cy={circlePoint.y}
               key={`${circlePoint.x},${circlePoint.y}`}
               r={4}
             />
           ))}
     </g>
  </svg>   
  );
````
The first approach violate the principle of react as it manipulate directly the dom element.
The second approach force you to write some low level naive svg code.
**None** of them are perfect.
 
The best is a graphical library which is natively implemented via React. 
After comparing the popularity and quality of documents, I've chosen `react-vis`
 
### File structure

